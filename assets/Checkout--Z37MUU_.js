import{c as A,b as L,d as S,r as v,j as e,L as y,t as g}from"./index-Dp5V46W7.js";import{L as k,h as D}from"./Layout-Cj4HZ6Vy.js";import{B as h}from"./useAdmin-BxB2P_tw.js";import{I as j}from"./input-Ccy3rJvP.js";import{L as b}from"./label-DcpSdAy0.js";import{T as $}from"./textarea-Du0_2yXs.js";import{c as p,f as d,i as I}from"./api-9T2QbLlA.js";import{C as M}from"./chevron-left-Df98c0fY.js";import"./dropdown-menu-Cc7uZZE_.js";import"./Combination-D7J0VMFL.js";import"./index-CU77mCJl.js";import"./index-BdQq_4o_.js";import"./plus-CAgRuiIJ.js";import"./trash-2-B4YhzpcP.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=A("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),Q=()=>{const w=L(),{items:l,clearCart:P}=S(),[s,i]=v.useState({name:"",phone:"",email:"",notes:""}),[m,f]=v.useState(!1);if(l.length===0)return e.jsx(k,{children:e.jsxs("div",{className:"container py-32 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Keranjang Kosong"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Tambahkan produk ke keranjang untuk melanjutkan checkout"}),e.jsx(h,{variant:"accent",asChild:!0,children:e.jsx(y,{to:"/katalog",children:"Lihat Katalog"})})]})});const u=l.reduce((a,t)=>{const o=p(t.startDate,t.endDate),r=t.addOns.reduce((c,n)=>c+n.pricePerDay,0)*o;return a+t.product.pricePerDay*o*t.quantity+r},0),x=u,N=async a=>{if(a.preventDefault(),!s.name||!s.phone){g({title:"Data tidak lengkap",description:"Mohon isi nama dan nomor WhatsApp",variant:"destructive"});return}f(!0);const t=l.map(r=>{const c=p(r.startDate,r.endDate);return{productId:r.product.id,productName:r.product.name,quantity:r.quantity,days:c,pricePerDay:r.product.pricePerDay}}),o=await I({customerName:s.name,customerPhone:s.phone,customerEmail:s.email||void 0,deliveryMethod:"pickup",notes:s.notes||void 0,items:t,subtotal:u,deposit:0,deliveryFee:0,total:x});if(o){const r=l.map(n=>{const C=p(n.startDate,n.endDate);return`- ${n.product.name} x${n.quantity} (${C} hari)`}).join(`
`),c=encodeURIComponent(`*BOOKING BARU - RentalGear*
Order ID: ${o.slice(0,8)}

*Data Penyewa:*
Nama: ${s.name}
No. WA: ${s.phone}
Email: ${s.email||"-"}

*Pengambilan:*
Ambil di Toko - Jl. Petualang No. 123, Dago, Bandung

*Pesanan:*
${r}

*TOTAL: ${d(x)}*

${s.notes?`Catatan: ${s.notes}`:""}`);window.open(`https://wa.me/6281234567890?text=${c}`,"_blank"),g({title:"Pesanan berhasil dibuat!",description:"Silakan lanjutkan konfirmasi via WhatsApp"}),P(),w("/")}else g({title:"Gagal membuat pesanan",description:"Silakan coba lagi",variant:"destructive"});f(!1)};return e.jsxs(k,{children:[e.jsx("section",{className:"pt-24 pb-4 bg-muted/30",children:e.jsx("div",{className:"container",children:e.jsx(h,{variant:"ghost",size:"sm",className:"gap-2",asChild:!0,children:e.jsxs(y,{to:"/katalog",children:[e.jsx(M,{className:"w-4 h-4"}),"Lanjut Belanja"]})})})}),e.jsx("section",{className:"py-8 bg-muted/30",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-8",children:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:N,className:"space-y-8",children:[e.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-card-foreground mb-4",children:"Data Penyewa"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name",children:"Nama Lengkap *"}),e.jsx(j,{id:"name",placeholder:"Nama lengkap",value:s.name,onChange:a=>i({...s,name:a.target.value}),className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"phone",children:"Nomor WhatsApp *"}),e.jsx(j,{id:"phone",type:"tel",placeholder:"081234567890",value:s.phone,onChange:a=>i({...s,phone:a.target.value}),className:"mt-1.5"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(b,{htmlFor:"email",children:"Email (opsional)"}),e.jsx(j,{id:"email",type:"email",placeholder:"email@contoh.com",value:s.email,onChange:a=>i({...s,email:a.target.value}),className:"mt-1.5"})]})]})]}),e.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-card-foreground mb-4",children:"Lokasi Pengambilan"}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border-2 border-accent bg-accent/5",children:[e.jsx(T,{className:"w-5 h-5 text-accent"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-card-foreground",children:"Ambil di Toko"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Jl. Petualang No. 123, Dago, Bandung"})]})]})]}),e.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-card-foreground mb-4",children:"Catatan (Opsional)"}),e.jsx($,{placeholder:"Catatan tambahan untuk tim kami...",value:s.notes,onChange:a=>i({...s,notes:a.target.value})})]}),e.jsx(h,{type:"submit",variant:"accent",size:"xl",className:"w-full lg:hidden",disabled:m,children:m?"Memproses...":"Konfirmasi via WhatsApp"})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-card rounded-xl border border-border p-6 sticky top-24",children:[e.jsx("h2",{className:"text-lg font-semibold text-card-foreground mb-4",children:"Ringkasan Pesanan"}),e.jsx("div",{className:"space-y-4 mb-6",children:l.map(a=>{const t=p(a.startDate,a.endDate);return e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-muted overflow-hidden shrink-0",children:e.jsx("img",{src:a.product.images[0],alt:a.product.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-card-foreground text-sm truncate",children:a.product.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d(a.product.pricePerDay)," × ",t," hari ×"," ",a.quantity]}),e.jsx("p",{className:"text-sm font-medium text-accent mt-1",children:d(a.product.pricePerDay*t*a.quantity)})]})]},a.product.id)})}),e.jsx(D,{className:"my-4"}),e.jsx("div",{className:"space-y-2 text-sm",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Sewa"}),e.jsx("span",{children:d(u)})]})}),e.jsx(D,{className:"my-4"}),e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("span",{className:"font-semibold",children:"Total Bayar"}),e.jsx("span",{className:"text-xl font-bold text-accent",children:d(x)})]}),e.jsx(h,{type:"submit",variant:"accent",size:"lg",className:"w-full hidden lg:flex",onClick:N,disabled:m,children:m?"Memproses...":"Konfirmasi via WhatsApp"})]})})]})]})})]})};export{Q as default};
