import{r as h,j as s,e as n,d as u,q as f,L as o}from"./index-Dp5V46W7.js";import{B as c,S as g}from"./useAdmin-BxB2P_tw.js";import{B as p}from"./badge-BgO9vWjm.js";import{H as v,j as b}from"./Layout-Cj4HZ6Vy.js";import{S as j}from"./star-D7hOOCw4.js";const w=e=>e.includes("supabase.co/storage")?[320,480,640,768,1024].map(a=>{const t=e.includes("?")?"&":"?";return`${e}${t}width=${a} ${a}w`}).join(", "):e,N=({src:e,alt:r,className:a,sizes:t="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",loading:i="lazy"})=>{const[l,m]=h.useState(!1),x=w(e),d=e.includes("supabase.co/storage");return s.jsx("img",{src:e,srcSet:d&&!l?x:void 0,sizes:d&&!l?t:void 0,alt:r,loading:i,onError:()=>m(!0),className:n("w-full h-full object-cover",a)})},z=({product:e})=>{const{addToCart:r}=u(),{isInWishlist:a,toggleWishlist:t}=f(),i=a(e.id);return s.jsxs("div",{className:"group bg-card rounded-xl overflow-hidden shadow-soft hover:shadow-medium transition-all duration-300 hover:-translate-y-1",children:[s.jsxs(o,{to:`/produk/${e.id}`,className:"block relative aspect-[4/3] overflow-hidden",children:[s.jsx(N,{src:e.images[0],alt:e.name,className:"transition-transform duration-500 group-hover:scale-110",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"}),s.jsx(p,{variant:e.available?"default":"secondary",className:n("absolute top-3 left-3",e.available?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.available?"Tersedia":"Habis"}),s.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1 bg-secondary/90 backdrop-blur-sm px-2 py-1 rounded-full",children:[s.jsx(j,{className:"w-3.5 h-3.5 text-accent fill-accent"}),s.jsx("span",{className:"text-xs font-medium text-secondary-foreground",children:e.rating})]})]}),s.jsx("button",{onClick:l=>{l.preventDefault(),t(e.id)},className:n("absolute top-14 right-3 p-2 rounded-full transition-all duration-200",i?"bg-red-500 text-white":"bg-secondary/90 backdrop-blur-sm text-muted-foreground hover:text-red-500 hover:bg-secondary"),children:s.jsx(v,{className:n("w-4 h-4",i&&"fill-current")})}),s.jsxs("div",{className:"p-4",children:[s.jsx(o,{to:`/produk/${e.id}`,children:s.jsx("h3",{className:"font-semibold text-card-foreground line-clamp-1 hover:text-primary transition-colors",children:e.name})}),s.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-lg font-bold text-accent",children:b(e.pricePerDay)}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"/hari"})]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsxs(c,{variant:"accent",size:"sm",className:"flex-1",onClick:()=>r(e),disabled:!e.available,children:[s.jsx(g,{className:"w-4 h-4"}),"Tambah"]}),s.jsx(c,{variant:"outline",size:"sm",asChild:!0,children:s.jsx(o,{to:`/produk/${e.id}`,children:"Detail"})})]})]})]})};export{z as P};
