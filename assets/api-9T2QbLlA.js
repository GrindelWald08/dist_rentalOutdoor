import{s as i}from"./index-Dp5V46W7.js";const c=async()=>{const{data:r,error:a}=await i.from("products").select("*").order("created_at",{ascending:!1});return a?(console.error("Error fetching products:",a),[]):r.map(e=>({id:e.id,name:e.name,category:e.category,pricePerDay:e.price_per_day,deposit:e.deposit,stock:e.stock,rating:Number(e.rating),images:e.images||["/placeholder.svg"],description:e.description||"",specifications:e.specifications||{},packageContents:e.package_contents||[],recommendations:e.recommendations||[],available:e.available}))},n=async r=>{const{data:a,error:e}=await i.from("products").select("*").eq("id",r).maybeSingle();return e||!a?(console.error("Error fetching product:",e),null):{id:a.id,name:a.name,category:a.category,pricePerDay:a.price_per_day,deposit:a.deposit,stock:a.stock,rating:Number(a.rating),images:a.images||["/placeholder.svg"],description:a.description||"",specifications:a.specifications||{},packageContents:a.package_contents||[],recommendations:a.recommendations||[],available:a.available}},d=async()=>{const{data:r,error:a}=await i.from("categories").select("*").order("sort_order",{ascending:!0});if(a)return console.error("Error fetching categories:",a),[];const{data:e}=await i.from("products").select("category"),o={};return e==null||e.forEach(t=>{o[t.category]=(o[t.category]||0)+1}),r.map(t=>({id:t.id,name:t.name,icon:t.icon,count:o[t.id]||0}))},m=async()=>{const{data:r,error:a}=await i.from("packages").select("*").eq("active",!0);return a?(console.error("Error fetching packages:",a),[]):r.map(e=>({id:e.id,name:e.name,description:e.description||"",items:e.items||[],pricePerDay:e.price_per_day,originalPrice:e.original_price,image:e.image_url||"/placeholder.svg"}))},l=async()=>{const{data:r,error:a}=await i.from("testimonials").select("*").eq("approved",!0).order("created_at",{ascending:!1});return a?(console.error("Error fetching testimonials:",a),[]):r.map(e=>({id:e.id,name:e.name,avatar:e.avatar_url||"",rating:e.rating,text:e.text,date:e.date}))},g=async r=>{const{data:a,error:e}=await i.from("orders").insert({customer_name:r.customerName,customer_phone:r.customerPhone,customer_email:r.customerEmail||null,delivery_method:r.deliveryMethod,delivery_address:r.deliveryAddress||null,notes:r.notes||null,items:r.items,subtotal:r.subtotal,deposit:r.deposit,delivery_fee:r.deliveryFee,total:r.total,status:"pending"}).select("id").single();return e?(console.error("Error creating order:",e),null):a.id},u=[{id:"ao1",name:"Rain Cover",pricePerDay:1e4},{id:"ao2",name:"Trekking Pole",pricePerDay:25e3},{id:"ao3",name:"Headlamp Extra",pricePerDay:15e3},{id:"ao4",name:"Dry Bag 10L",pricePerDay:1e4}],f=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),y=(r,a)=>{if(!r||!a)return 1;const e=Math.abs(a.getTime()-r.getTime());return Math.ceil(e/(1e3*60*60*24))||1};export{u as a,c as b,y as c,d,m as e,f,l as g,n as h,g as i};
