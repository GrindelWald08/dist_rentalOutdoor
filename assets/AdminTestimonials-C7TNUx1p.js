import{B as y,j as e,X as f,p as r}from"./index-Dp5V46W7.js";import{u as N,C as x,B as n,l as v,m as b,n as T}from"./useAdmin-BxB2P_tw.js";import{u}from"./useMutation-6ksDtqKl.js";import{A as w}from"./AdminLayout-3U3SLMcL.js";import{T as S,a as A,b as i,c as t,d as C,e as a}from"./table-DyyXYKSB.js";import{T as M}from"./trash-2-B4YhzpcP.js";import{S as k}from"./star-D7hOOCw4.js";import{f as q,i as B}from"./id-8SRIAgvI.js";import"./package-kCUf3xtc.js";const L=()=>{const l=y(),{data:o=[],isLoading:h}=N({queryKey:["admin-testimonials"],queryFn:T}),d=u({mutationFn:({id:s,approved:c})=>v(s,c),onSuccess:()=>{l.invalidateQueries({queryKey:["admin-testimonials"]}),r.success("Status testimoni berhasil diperbarui")},onError:()=>{r.error("Gagal memperbarui status")}}),p=u({mutationFn:b,onSuccess:()=>{l.invalidateQueries({queryKey:["admin-testimonials"]}),r.success("Testimoni berhasil dihapus")},onError:()=>{r.error("Gagal menghapus testimoni")}}),j=s=>{confirm("Yakin ingin menghapus testimoni ini?")&&p.mutate(s)},g=s=>e.jsx("div",{className:"flex gap-0.5",children:Array.from({length:5}).map((c,m)=>e.jsx(k,{className:`w-4 h-4 ${m<s?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},m))});return e.jsx(w,{title:"Kelola Testimoni",children:e.jsx("div",{className:"bg-card rounded-lg border border-border",children:e.jsxs(S,{children:[e.jsx(A,{children:e.jsxs(i,{children:[e.jsx(t,{children:"Nama"}),e.jsx(t,{children:"Rating"}),e.jsx(t,{className:"max-w-md",children:"Testimoni"}),e.jsx(t,{children:"Tanggal"}),e.jsx(t,{children:"Status"}),e.jsx(t,{className:"text-right",children:"Aksi"})]})}),e.jsx(C,{children:h?e.jsx(i,{children:e.jsx(a,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"Memuat data..."})}):o.length===0?e.jsx(i,{children:e.jsx(a,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"Belum ada testimoni"})}):o.map(s=>e.jsxs(i,{children:[e.jsx(a,{className:"font-medium",children:s.name}),e.jsx(a,{children:g(s.rating)}),e.jsx(a,{className:"max-w-md",children:e.jsx("p",{className:"truncate",children:s.text})}),e.jsx(a,{children:q(new Date(s.createdAt),"dd MMM yyyy",{locale:B})}),e.jsx(a,{children:s.approved?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(x,{className:"w-3 h-3"}),"Disetujui"]}):e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:"Menunggu"})}),e.jsxs(a,{className:"text-right",children:[s.approved?e.jsx(n,{variant:"ghost",size:"icon",className:"text-yellow-600 hover:text-yellow-700",onClick:()=>d.mutate({id:s.id,approved:!1}),children:e.jsx(f,{className:"w-4 h-4"})}):e.jsx(n,{variant:"ghost",size:"icon",className:"text-green-600 hover:text-green-700",onClick:()=>d.mutate({id:s.id,approved:!0}),children:e.jsx(x,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>j(s.id),children:e.jsx(M,{className:"w-4 h-4"})})]})]},s.id))})]})})})};export{L as default};
